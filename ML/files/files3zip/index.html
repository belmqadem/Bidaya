<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>LqahCare â€” AI Neonatal Risk Intelligence</title>
  <link rel="stylesheet" href="styles.css"/>
</head>
<body>
<div class="container">

  <!-- HEADER -->
  <header class="header">
    <div class="logo">
      <div class="logo-mark">ðŸ«€</div>
      <div>
        <div class="logo-name">LqahCare</div>
        <div class="logo-sub">AI Neonatal Intelligence Â· Morocco</div>
      </div>
    </div>
    <div class="header-pill"><div class="pulse"></div>AI Prediction Module â€” Phase 1</div>
  </header>

  <!-- HERO -->
  <section class="hero">
    <div>
      <div class="hero-eyebrow">Digital Vaccination Platform Â· ML Demo</div>
      <h1 class="hero-title">Predicting <em>Neonatal Risk</em><br>from Birth Records</h1>
      <p class="hero-desc">
        Trained on 1,236 real birth records, this module demonstrates how AI flags
        at-risk newborns using data already captured in a standard Moroccan carnet de santÃ©.
        <strong>As the platform scales, models retrain on real Moroccan data</strong> â€” 
        accuracy improves with every record digitized.
      </p>
    </div>
    <div class="kpi-grid">
      <div class="kpi"><span class="kpi-val" id="kpi-records">â€”</span><span class="kpi-lbl">Records</span></div>
      <div class="kpi"><span class="kpi-val" id="kpi-lowbw">â€”</span><span class="kpi-lbl">Low BW</span></div>
      <div class="kpi"><span class="kpi-val" id="kpi-preterm">â€”</span><span class="kpi-lbl">Preterm</span></div>
      <div class="kpi"><span class="kpi-val" id="kpi-smoke">â€”</span><span class="kpi-lbl">Smokers</span></div>
    </div>
  </section>

  <!-- TABS -->
  <nav class="tab-bar">
    <button class="tab-btn active" data-tab="overview" onclick="switchTab('overview')">ðŸ“Š Overview</button>
    <button class="tab-btn"        data-tab="models"   onclick="switchTab('models')">ðŸ¤– ML Models</button>
    <button class="tab-btn"        data-tab="risk"     onclick="switchTab('risk')">ðŸš¨ Risk Prediction</button>
  </nav>

  <!-- â•â•â•â•â•â•â•â•â•â•â• OVERVIEW â•â•â•â•â•â•â•â•â•â•â• -->
  <section id="tab-overview" class="tab-panel active">

    <div class="insight-strip">
      <div class="ins blue"><div class="ins-val">3,390g</div><div class="ins-txt">Average birth weight â€” within healthy WHO range</div></div>
      <div class="ins orange"><div class="ins-val">âˆ’253g</div><div class="ins-txt">Birth weight gap: babies of smoker vs non-smoker mothers</div></div>
      <div class="ins green"><div class="ins-val">Gestation</div><div class="ins-txt">Top predictive factor â€” pregnancy length drives most variance</div></div>
    </div>

    <div class="g2 mb-24">
      <div class="card">
        <div class="card-eyebrow">Distribution</div>
        <div class="card-heading">Birth Weight Distribution (grams)</div>
        <div class="chart-box"><svg id="hist-svg" style="height:200px"></svg></div>
        <p style="font-size:12px;color:var(--muted);margin-top:10px">Red line = 2,500 g WHO low birth weight threshold</p>
      </div>
      <div class="card">
        <div class="card-eyebrow">Key Insight</div>
        <div class="card-heading">Smoking Impact on Birth Weight</div>
        <div style="margin:18px 0">
          <div style="display:flex;justify-content:space-between;margin-bottom:6px">
            <span style="font-size:14px;font-weight:600">Non-Smoker Mothers</span>
            <span style="font-family:var(--mono);color:var(--safe);font-size:13px" id="smoke-nonsmoker">â€”</span>
          </div>
          <div class="track" style="height:15px"><div class="fill fill-lr" style="width:91%;height:100%"></div></div>
        </div>
        <div style="margin-bottom:20px">
          <div style="display:flex;justify-content:space-between;margin-bottom:6px">
            <span style="font-size:14px;font-weight:600">Smoker Mothers</span>
            <span style="font-family:var(--mono);color:var(--danger);font-size:13px" id="smoke-smoker">â€”</span>
          </div>
          <div class="track" style="height:15px"><div class="fill fill-gb" style="width:83%;height:100%"></div></div>
        </div>
        <div style="background:rgba(255,59,94,.06);border:1px solid rgba(255,59,94,.2);border-radius:8px;padding:12px">
          <span style="font-size:13px;color:#ff8fa3">âš  Babies born to smoker mothers are <strong style="color:var(--danger)">~7% lighter</strong> on average â€” automatically flagged from a single field in the birth record.</span>
        </div>
      </div>
    </div>

    <div class="card mb-24">
      <div class="card-eyebrow">Relationship Analysis</div>
      <div class="card-heading">Gestation Days vs Birth Weight â€” Smokers vs Non-Smokers</div>
      <div class="chart-box"><svg id="gest-svg" style="height:260px"></svg></div>
      <div class="legend">
        <span><span class="leg-dot" style="background:rgba(0,212,255,.75)"></span>Non-smoker mothers</span>
        <span><span class="leg-dot" style="background:rgba(255,107,53,.75)"></span>Smoker mothers</span>
        <span>Longer gestation â†’ higher birth weight (strong positive correlation)</span>
      </div>
    </div>

  </section>

  <!-- â•â•â•â•â•â•â•â•â•â•â• ML MODELS â•â•â•â•â•â•â•â•â•â•â• -->
  <section id="tab-models" class="tab-panel">

    <!-- Parameter Tuning -->
    <div class="tuning-panel">
      <div class="tuning-title">âš™ Interactive Parameter Tuning â€” Gradient Boosting</div>
      <div class="sliders-row">
        <div class="slider-group">
          <div class="slider-label">Test Size <span class="slider-val" id="ts-display">20%</span></div>
          <input type="range" id="ts-slider" min="0" max="3" step="1" value="1"/>
          <span class="slider-hint">Share of data held out for testing</span>
        </div>
        <div class="slider-group">
          <div class="slider-label">N Estimators <span class="slider-val" id="ne-display">100</span></div>
          <input type="range" id="ne-slider" min="0" max="3" step="1" value="2"/>
          <span class="slider-hint">Number of boosting trees built</span>
        </div>
        <div class="slider-group">
          <div class="slider-label">Max Depth <span class="slider-val" id="md-display">3</span></div>
          <input type="range" id="md-slider" min="0" max="3" step="1" value="1"/>
          <span class="slider-hint">Max tree depth (None = unlimited)</span>
        </div>
      </div>
      <div class="tuning-results">
        <div class="tval-box"><div class="tval-num" id="t-r2" style="color:var(--accent)">â€”</div><div class="tval-lbl">RÂ² Score</div></div>
        <div class="tval-box"><div class="tval-num" style="color:var(--accent2)" id="t-rmse">â€”</div><div class="tval-lbl">RMSE</div></div>
        <div class="tval-box"><div class="tval-num" style="color:var(--purple)" id="t-train">â€”</div><div class="tval-lbl">Train Records</div></div>
        <div class="tval-box"><div class="tval-num" style="color:var(--muted)" id="t-test">â€”</div><div class="tval-lbl">Test Records</div></div>
      </div>
    </div>

    <!-- Chart row 1: RÂ² bars + Feature Importance -->
    <div class="g2 mb-18">
      <div class="card">
        <div class="card-eyebrow">Performance</div>
        <div class="card-heading">RÂ² Score â€” All 3 Models</div>
        <div class="model-list" id="model-bars"></div>
        <div class="info-box" style="margin-top:16px">
          <strong>Why Gradient Boosting wins:</strong> It corrects errors iteratively â€” each tree fixes what the previous got wrong. Best balance of RÂ² and RMSE on this dataset.
        </div>
      </div>
      <div class="card">
        <div class="card-eyebrow">Random Forest Analysis</div>
        <div class="card-heading">Feature Importance</div>
        <div class="fi-list" id="fi-bars"></div>
        <p style="font-size:12px;color:var(--muted);margin-top:12px;line-height:1.65">
          Gestation dominates â€” clinically expected. Smoking ranks 6th here but its directional impact on risk classification is clinically significant.
        </p>
      </div>
    </div>

    <!-- Chart row 2: Predicted vs Actual -->
    <div class="card mb-18">
      <div class="card-eyebrow">Model Validation</div>
      <div class="card-heading">Gradient Boosting â€” Predicted vs Actual Birth Weight</div>
      <div class="chart-box"><svg id="pred-svg" style="height:280px"></svg></div>
      <div class="legend">
        <span><span style="display:inline-block;width:20px;height:1px;border-top:2px dashed rgba(0,212,255,.5);vertical-align:middle;margin-right:5px"></span>Perfect prediction</span>
        <span>Dots near diagonal = good fit Â· Spread = biological variance not captured by 6 features</span>
      </div>
    </div>

    <!-- Chart row 3: Residuals + Learning Curve side by side -->
    <div class="g2 mb-18">
      <div class="card">
        <div class="card-eyebrow">Error Analysis</div>
        <div class="card-heading">Residual Plot</div>
        <div class="chart-box"><svg id="resid-svg" style="height:240px"></svg></div>
        <div class="legend">
          <span><span class="leg-dot" style="background:rgba(57,255,20,.7)"></span>Over-predicted</span>
          <span><span class="leg-dot" style="background:rgba(255,59,94,.7)"></span>Under-predicted</span>
          <span>Dots near zero line = small error</span>
        </div>
      </div>
      <div class="card">
        <div class="card-eyebrow">Data Scaling Effect</div>
        <div class="card-heading">Learning Curve</div>
        <div class="chart-box"><svg id="lc-svg" style="height:240px"></svg></div>
        <div class="legend">
          <span><span class="leg-dot" style="background:#00d4ff"></span>Training score</span>
          <span><span class="leg-dot" style="background:#39ff14"></span>Validation score</span>
          <span>More records â†’ scores converge â†’ better model</span>
        </div>
      </div>
    </div>

    <!-- RMSE summary -->
    <div class="card">
      <div class="card-eyebrow">Error Summary</div>
      <div class="card-heading">Root Mean Squared Error â€” All Models</div>
      <div class="rmse-trio">
        <div class="rmse-box"><div class="rmse-num" style="color:var(--accent)">Â±473g</div><div class="rmse-name">Linear Regression</div><div class="rmse-sub">RÂ² = 0.293</div></div>
        <div class="rmse-box"><div class="rmse-num" style="color:var(--purple)">Â±495g</div><div class="rmse-name">Random Forest</div><div class="rmse-sub">RÂ² = 0.228</div></div>
        <div class="rmse-box best"><div class="rmse-num" style="color:var(--accent2)">Â±479g</div><div class="rmse-name">Gradient Boosting âœ“</div><div class="rmse-sub">RÂ² = 0.275 Â· Best balance</div></div>
      </div>
      <div class="info-box" style="margin-top:16px">
        <strong>Clinical framing:</strong> The goal is <b>risk triage</b>, not precise measurement.
        A prediction of 2,100 g triggers a flag. A prediction of 3,700 g clears it. That threshold decision is what matters in practice.
      </div>
    </div>

  </section>

  <!-- â•â•â•â•â•â•â•â•â•â•â• RISK PREDICTION â•â•â•â•â•â•â•â•â•â•â• -->
  <section id="tab-risk" class="tab-panel">

    <!-- Live Prediction Form -->
    <div class="card mb-24">
      <div class="card-eyebrow">Live Prediction</div>
      <div class="card-heading">Enter Mother's Data â€” Get Instant Risk Assessment</div>
      <div class="pred-form-wrap">
        <div>
          <div class="form-grid">
            <div class="field">
              <label>Gestation (days)</label>
              <input type="number" id="f-gest" placeholder="e.g. 280" min="140" max="320"/>
            </div>
            <div class="field">
              <label>Mother Age (years)</label>
              <input type="number" id="f-age" placeholder="e.g. 26" min="14" max="50"/>
            </div>
            <div class="field">
              <label>Mother Height (inches)</label>
              <input type="number" id="f-height" placeholder="e.g. 63" min="48" max="80"/>
            </div>
            <div class="field">
              <label>Mother Weight (lbs)</label>
              <input type="number" id="f-weight" placeholder="e.g. 125" min="80" max="300"/>
            </div>
            <div class="field">
              <label>First Child?</label>
              <select id="f-parity">
                <option value="0">Yes (parity = 0)</option>
                <option value="1">No (parity = 1)</option>
              </select>
            </div>
            <div class="field">
              <label>Smoking?</label>
              <select id="f-smoke">
                <option value="0">No</option>
                <option value="1">Yes</option>
              </select>
            </div>
          </div>
          <button class="predict-btn" onclick="runPrediction()">ðŸ§  Predict Birth Weight &amp; Risk</button>
        </div>
        <div class="result-panel empty" id="result-panel">
          Enter the mother's data and click Predict to see the AI assessment.
        </div>
      </div>
    </div>

    <!-- Simulated Profiles -->
    <div class="card mb-24">
      <div class="card-eyebrow">Simulated Profiles</div>
      <div class="card-heading">4 Example Moroccan Birth Records</div>
      <div class="risk-grid" id="risk-grid"></div>
    </div>

    <!-- Workflow -->
    <div class="card">
      <div class="card-eyebrow">Platform Workflow</div>
      <div class="card-heading">Doctor Digitizes Record â†’ AI Flags Risk â†’ Parent Alert</div>
      <div class="process-strip" style="margin-top:8px">
        <div class="proc-box"><div class="proc-icon">ðŸ“‹</div><div class="proc-title">1 Â· Doctor Entry</div><div class="proc-desc">Enters gestation, maternal data and smoking status when registering the newborn in LqahCare</div></div>
        <div class="proc-box"><div class="proc-icon">ðŸ§ </div><div class="proc-title">2 Â· AI Inference</div><div class="proc-desc">Gradient Boosting predicts birth weight, classifies risk level, flags record for follow-up</div></div>
        <div class="proc-box"><div class="proc-icon">ðŸ“±</div><div class="proc-title">3 Â· Parent Alert</div><div class="proc-desc">High-risk parents receive SMS / WhatsApp with next appointment reminder and watch-for signs</div></div>
      </div>
    </div>

  </section>

</div><!-- /container -->

<div class="container">
  <footer>
    <span>LqahCare Â· AI Neonatal Intelligence Â· Morocco MVP</span>
    <span>Dataset: UC Berkeley Child Health Study Â· 1,236 records Â· 6 features</span>
    <span>Models: Linear Regression Â· Random Forest Â· Gradient Boosting</span>
  </footer>
</div>

<script src="data.js"></script>
<script src="charts.js"></script>
</body>
</html>
